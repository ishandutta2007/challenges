/*

A lexicographically increasing number is an integer whose digits are in strictly increasing order. Print all lexicographically increasing numbers under 10000.

*/

#include <assert.h>
#include <stdio.h>
#include <string.h>

#define nelem(x) (sizeof(x) / sizeof(x[0]))

typedef unsigned long long uvlong;

uvlong
lexicographic(uvlong n, int *u)
{
	uvlong d[10];
	uvlong i, r;

	memset(d, 0, sizeof(d));
	do {
		d[n % 10]++;
		n /= 10;
	} while (n);

	r = 0;
	*u = 1;
	for (i = 0; i < 10; i++) {
		if (d[i] > 1)
			*u = 0;
		for (; d[i]; d[i]--)
			r = (r * 10) + i;
	}
	return r;
}

size_t
gen(uvlong n, uvlong *r)
{
	uvlong i, v;
	int u;
	size_t l;

	l = 0;
	for (i = 0; i <= n; i++) {
		v = lexicographic(i, &u);
		if (u && i == v)
			r[l++] = i;
	}
	return l;
}

int
main(void)
{
	static const uvlong tab[] = {
	    0,
	    1,
	    2,
	    3,
	    4,
	    5,
	    6,
	    7,
	    8,
	    9,
	    12,
	    13,
	    14,
	    15,
	    16,
	    17,
	    18,
	    19,
	    23,
	    24,
	    25,
	    26,
	    27,
	    28,
	    29,
	    34,
	    35,
	    36,
	    37,
	    38,
	    39,
	    45,
	    46,
	    47,
	    48,
	    49,
	    56,
	    57,
	    58,
	    59,
	    67,
	    68,
	    69,
	    78,
	    79,
	    89,
	    123,
	    124,
	    125,
	    126,
	    127,
	    128,
	    129,
	    134,
	    135,
	    136,
	    137,
	    138,
	    139,
	    145,
	    146,
	    147,
	    148,
	    149,
	    156,
	    157,
	    158,
	    159,
	    167,
	    168,
	    169,
	    178,
	    179,
	    189,
	    234,
	    235,
	    236,
	    237,
	    238,
	    239,
	    245,
	    246,
	    247,
	    248,
	    249,
	    256,
	    257,
	    258,
	    259,
	    267,
	    268,
	    269,
	    278,
	    279,
	    289,
	    345,
	    346,
	    347,
	    348,
	    349,
	    356,
	    357,
	    358,
	    359,
	    367,
	    368,
	    369,
	    378,
	    379,
	    389,
	    456,
	    457,
	    458,
	    459,
	    467,
	    468,
	    469,
	    478,
	    479,
	    489,
	    567,
	    568,
	    569,
	    578,
	    579,
	    589,
	    678,
	    679,
	    689,
	    789,
	    1234,
	    1235,
	    1236,
	    1237,
	    1238,
	    1239,
	    1245,
	    1246,
	    1247,
	    1248,
	    1249,
	    1256,
	    1257,
	    1258,
	    1259,
	    1267,
	    1268,
	    1269,
	    1278,
	    1279,
	    1289,
	    1345,
	    1346,
	    1347,
	    1348,
	    1349,
	    1356,
	    1357,
	    1358,
	    1359,
	    1367,
	    1368,
	    1369,
	    1378,
	    1379,
	    1389,
	    1456,
	    1457,
	    1458,
	    1459,
	    1467,
	    1468,
	    1469,
	    1478,
	    1479,
	    1489,
	    1567,
	    1568,
	    1569,
	    1578,
	    1579,
	    1589,
	    1678,
	    1679,
	    1689,
	    1789,
	    2345,
	    2346,
	    2347,
	    2348,
	    2349,
	    2356,
	    2357,
	    2358,
	    2359,
	    2367,
	    2368,
	    2369,
	    2378,
	    2379,
	    2389,
	    2456,
	    2457,
	    2458,
	    2459,
	    2467,
	    2468,
	    2469,
	    2478,
	    2479,
	    2489,
	    2567,
	    2568,
	    2569,
	    2578,
	    2579,
	    2589,
	    2678,
	    2679,
	    2689,
	    2789,
	    3456,
	    3457,
	    3458,
	    3459,
	    3467,
	    3468,
	    3469,
	    3478,
	    3479,
	    3489,
	    3567,
	    3568,
	    3569,
	    3578,
	    3579,
	    3589,
	    3678,
	    3679,
	    3689,
	    3789,
	    4567,
	    4568,
	    4569,
	    4578,
	    4579,
	    4589,
	    4678,
	    4679,
	    4689,
	    4789,
	    5678,
	    5679,
	    5689,
	    5789,
	    6789,
	};

	uvlong r[1024];
	uvlong n;

	n = gen(10000, r);
	assert(n == nelem(tab));
	assert(!memcmp(tab, r, n * sizeof(*r)));

	return 0;
}
