/*

Given a 2D array of some suspended blocks (represented as hastags),
return another 2D array which shows the end result once gravity is switched on.

Examples

switchGravityOn([
  ["-", "#", "#", "-"],
  ["-", "-", "-", "-"],
  ["-", "-", "-", "-"],
  ["-", "-", "-", "-"]
]) ➞ [
  ["-", "-", "-", "-"],
  ["-", "-", "-", "-"],
  ["-", "-", "-", "-"],
  ["-", "#", "#", "-"]
]

switchGravityOn([
  ["-", "#", "#", "-"],
  ["-", "-", "#", "-"],
  ["-", "-", "-", "-"],
]) ➞ [
  ["-", "-", "-", "-"],
  ["-", "-", "#", "-"],
  ["-", "#", "#", "-"]
]

switchGravityOn([
  ["-", "#", "#", "#", "#", "-"],
  ["#", "-", "-", "#", "#", "-"],
  ["-", "#", "-", "-", "-", "-"],
  ["-", "-", "-", "-", "-", "-"]
]) ➞ [
  ["-", "-", "-", "-", "-", "-"],
  ["-", "-", "-", "-", "-", "-"],
  ["-", "#", "-", "#", "#", "-"],
  ["#", "#", "#", "#", "#", "-"]
]

Notes

Each block falls individually, meaning there are no rigid objects.
Think about it like falling sand in Minecraft as opposed to the rigid blocks in Tetris.

*/

#include <assert.h>
#include <stdio.h>
#include <string.h>

void
swgron(size_t r, size_t c, char m[r][c], char p[r][c])
{
	size_t i, j, l;

	for (i = 0; i < c; i++) {
		for (j = l = 0; j < r; j++)
			l += (m[j][i] == '#');
		for (j = 0; j < r; j++)
			p[r - j - 1][i] = (j < l) ? '#' : '-';
	}
}

void
test(size_t r, size_t c, char a[r][c], char b[r][c])
{
	char p[r][c];

	swgron(r, c, a, p);
	assert(!memcmp(b, p, sizeof(p)));
}

int
main(void)
{
	char a1[4][4] = {
	    {'-', '#', '#', '-'},
	    {'-', '-', '-', '-'},
	    {'-', '-', '-', '-'},
	    {'-', '-', '-', '-'},
	};
	char b1[4][4] = {
	    {'-', '-', '-', '-'},
	    {'-', '-', '-', '-'},
	    {'-', '-', '-', '-'},
	    {'-', '#', '#', '-'},
	};

	char a2[3][4] = {
	    {'-', '#', '#', '-'},
	    {'-', '-', '#', '-'},
	    {'-', '-', '-', '-'},
	};
	char b2[3][4] = {
	    {'-', '-', '-', '-'},
	    {'-', '-', '#', '-'},
	    {'-', '#', '#', '-'},
	};

	char a3[4][6] = {
	    {'-', '#', '#', '#', '#', '-'},
	    {'#', '-', '-', '#', '#', '-'},
	    {'-', '#', '-', '-', '-', '-'},
	    {'-', '-', '-', '-', '-', '-'},
	};
	char b3[4][6] = {
	    {'-', '-', '-', '-', '-', '-'},
	    {'-', '-', '-', '-', '-', '-'},
	    {'-', '#', '-', '#', '#', '-'},
	    {'#', '#', '#', '#', '#', '-'},
	};

	char a4[4][6] = {
	    {'-', '#', '#', '#', '#', '-'},
	    {'#', '-', '-', '#', '#', '-'},
	    {'-', '#', '-', '-', '-', '-'},
	    {'-', '#', '-', '#', '-', '-'},
	};
	char b4[4][6] = {
	    {'-', '-', '-', '-', '-', '-'},
	    {'-', '#', '-', '#', '-', '-'},
	    {'-', '#', '-', '#', '#', '-'},
	    {'#', '#', '#', '#', '#', '-'},
	};

	char a5[3][4] = {
	    {'-', '#', '#', '-'},
	    {'-', '-', '#', '-'},
	    {'#', '#', '-', '-'},
	};
	char b5[3][4] = {
	    {'-', '-', '-', '-'},
	    {'-', '#', '#', '-'},
	    {'#', '#', '#', '-'},
	};

	char a6[4][1] = {
	    {'#'},
	    {'-'},
	    {'#'},
	    {'-'},
	};
	char b6[4][1] = {
	    {'-'},
	    {'-'},
	    {'#'},
	    {'#'},
	};

	char a7[4][1] = {
	    {'#'},
	    {'#'},
	    {'#'},
	    {'#'},
	};
	char b7[4][1] = {
	    {'#'},
	    {'#'},
	    {'#'},
	    {'#'},
	};

	test(4, 4, a1, b1);
	test(3, 4, a2, b2);
	test(4, 6, a3, b3);
	test(4, 6, a4, b4);
	test(3, 4, a5, b5);
	test(4, 1, a6, b6);
	test(4, 1, a7, b7);

	return 0;
}
